From 9aaff6c9b4c88dcec52a29a91e62ce3d817c2c1b Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Thu, 17 Nov 2016 14:52:40 +1100
Subject: [PATCH] mmdevapi: Return a valid interface when the initializing the
 driver fails

Fixes: https://bugs.winehq.org/show_bug.cgi?id=40823

Signed-off-by: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
---
 dlls/mmdevapi/main.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/dlls/mmdevapi/main.c b/dlls/mmdevapi/main.c
index 110c802..fc6a6ab 100644
--- a/dlls/mmdevapi/main.c
+++ b/dlls/mmdevapi/main.c
@@ -281,7 +281,6 @@ HRESULT WINAPI DllGetClassObject(REFCLSID rclsid, REFIID riid, LPVOID *ppv)
 
     if(!init_driver()){
         ERR("Driver initialization failed\n");
-        return E_FAIL;
     }
 
     if (ppv == NULL) {
-- 
1.9.1

