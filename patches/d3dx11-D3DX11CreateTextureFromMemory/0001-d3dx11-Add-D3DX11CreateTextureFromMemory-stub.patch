From c02c73e5c57d4f70c7b07bd6a139f44f4b152f48 Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Tue, 16 Aug 2016 14:17:04 +1000
Subject: [PATCH] d3dx11: Add D3DX11CreateTextureFromMemory stub

Fixes: https://bugs.winehq.org/show_bug.cgi?id=40710

Signed-off-by: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
---
 dlls/d3dx11_42/d3dx11_42.spec |  2 +-
 dlls/d3dx11_43/async.c        | 10 ++++++++++
 dlls/d3dx11_43/d3dx11_43.spec |  2 +-
 3 files changed, 12 insertions(+), 2 deletions(-)

diff --git a/dlls/d3dx11_42/d3dx11_42.spec b/dlls/d3dx11_42/d3dx11_42.spec
index cb02a95..45e8482 100644
--- a/dlls/d3dx11_42/d3dx11_42.spec
+++ b/dlls/d3dx11_42/d3dx11_42.spec
@@ -22,7 +22,7 @@
 @ stub D3DX11CreateShaderResourceViewFromResourceW
 @ stub D3DX11CreateTextureFromFileA
 @ stub D3DX11CreateTextureFromFileW
-@ stub D3DX11CreateTextureFromMemory
+@ stdcall D3DX11CreateTextureFromMemory(ptr ptr long ptr ptr ptr ptr)
 @ stub D3DX11CreateTextureFromResourceA
 @ stub D3DX11CreateTextureFromResourceW
 @ stub D3DX11CreateThreadPump
diff --git a/dlls/d3dx11_43/async.c b/dlls/d3dx11_43/async.c
index b33c235..6eb2a10 100644
--- a/dlls/d3dx11_43/async.c
+++ b/dlls/d3dx11_43/async.c
@@ -65,3 +65,13 @@ HRESULT WINAPI D3DX11CompileFromFileW(const WCHAR *filename, const D3D10_SHADER_
 
     return E_NOTIMPL;
 }
+
+HRESULT WINAPI D3DX11CreateTextureFromMemory(ID3D11Device *device, const void *data,
+        SIZE_T data_size, D3DX11_IMAGE_LOAD_INFO *load_info, ID3DX11ThreadPump *pump,
+        ID3D11Resource **texture, HRESULT *hresult)
+{
+    FIXME("device %p, data %p, data_size %lu, load_info %p, pump %p, texture %p, hresult %p stub.\n",
+            device, data, data_size, load_info, pump, texture, hresult);
+
+    return E_NOTIMPL;
+}
diff --git a/dlls/d3dx11_43/d3dx11_43.spec b/dlls/d3dx11_43/d3dx11_43.spec
index 69c12fb..7c3a598 100644
--- a/dlls/d3dx11_43/d3dx11_43.spec
+++ b/dlls/d3dx11_43/d3dx11_43.spec
@@ -22,7 +22,7 @@
 @ stub D3DX11CreateShaderResourceViewFromResourceW
 @ stub D3DX11CreateTextureFromFileA
 @ stub D3DX11CreateTextureFromFileW
-@ stub D3DX11CreateTextureFromMemory
+@ stdcall D3DX11CreateTextureFromMemory(ptr ptr long ptr ptr ptr ptr)
 @ stub D3DX11CreateTextureFromResourceA
 @ stub D3DX11CreateTextureFromResourceW
 @ stub D3DX11CreateThreadPump
-- 
2.8.1

