From 7c1a17f887abe55f7b82c2d2ad1d92a8ae0089d6 Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Thu, 19 Nov 2015 15:12:41 +1100
Subject: [PATCH 6/9] d3dx10: Add D3DX10UnsetAllDeviceObjects stub

Fixes: https://bugs.winehq.org/show_bug.cgi?id=27035

Signed-off-by: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
---
 dlls/d3dx10_43/d3dx10_43.spec   | 2 +-
 dlls/d3dx10_43/d3dx10_43_main.c | 9 ++++++++-
 include/d3dx10core.idl          | 1 +
 3 files changed, 10 insertions(+), 2 deletions(-)

diff --git a/dlls/d3dx10_43/d3dx10_43.spec b/dlls/d3dx10_43/d3dx10_43.spec
index 714e69f..ca80ac2 100644
--- a/dlls/d3dx10_43/d3dx10_43.spec
+++ b/dlls/d3dx10_43/d3dx10_43.spec
@@ -64,7 +64,7 @@
 @ stub D3DX10SaveTextureToFileA(ptr ptr str)
 @ stub D3DX10SaveTextureToFileW(ptr ptr wstr)
 @ stub D3DX10SaveTextureToMemory(ptr ptr ptr long)
-@ stub D3DX10UnsetAllDeviceObjects(ptr)
+@ stdcall D3DX10UnsetAllDeviceObjects(ptr)
 @ stdcall D3DXBoxBoundProbe(ptr ptr ptr ptr) d3dx9_36.D3DXBoxBoundProbe
 @ stdcall D3DXColorAdjustContrast(ptr ptr float) d3dx9_36.D3DXColorAdjustContrast
 @ stdcall D3DXColorAdjustSaturation(ptr ptr float) d3dx9_36.D3DXColorAdjustSaturation
diff --git a/dlls/d3dx10_43/d3dx10_43_main.c b/dlls/d3dx10_43/d3dx10_43_main.c
index e1242e4..1611fdf 100644
--- a/dlls/d3dx10_43/d3dx10_43_main.c
+++ b/dlls/d3dx10_43/d3dx10_43_main.c
@@ -144,4 +144,11 @@ HRESULT WINAPI D3DX10CreateFontW(ID3D10Device *device, int height, UINT width, U
             debugstr_w(facename), font);
 
     return E_NOTIMPL;
-}
\ No newline at end of file
+}
+
+HRESULT WINAPI D3DX10UnsetAllDeviceObjects(ID3D10Device *device)
+{
+    FIXME("device %p.\n", device);
+
+    return E_NOTIMPL;
+}
diff --git a/include/d3dx10core.idl b/include/d3dx10core.idl
index 1eccb43..f7444ad 100644
--- a/include/d3dx10core.idl
+++ b/include/d3dx10core.idl
@@ -117,6 +117,7 @@ cpp_quote("#ifdef __cplusplus")
 cpp_quote("extern \"C\" {")
 cpp_quote("#endif")
 cpp_quote("HRESULT WINAPI D3DX10CreateSprite(ID3D10Device *device, UINT size, ID3DX10Sprite **sprite);")
+cpp_quote("HRESULT WINAPI D3DX10UnsetAllDeviceObjects(ID3D10Device *device);")
 cpp_quote("#ifdef __cplusplus")
 cpp_quote("}")
 cpp_quote("#endif")
-- 
1.9.1

