From f5009f2e907ca66d6c6509bb603918c950411969 Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Tue, 6 Jun 2017 15:18:29 +1000
Subject: [PATCH 1/3] dplayx: First Nameserver address may be null.

Signed-off-by: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
---
 dlls/dplayx/name_server.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/dlls/dplayx/name_server.c b/dlls/dplayx/name_server.c
index 7b04bcd..7ca1500 100644
--- a/dlls/dplayx/name_server.c
+++ b/dlls/dplayx/name_server.c
@@ -163,7 +163,10 @@ LPVOID NS_GetNSAddr( LPVOID lpNSInfo )
    *        in place.
    */
 #if 1
-  return lpCache->first.lpQHFirst->lpNSAddrHdr;
+  if ( lpCache->first.lpQHFirst )
+    return lpCache->first.lpQHFirst->lpNSAddrHdr;
+
+  return NULL;
 #else
   /* FIXME: Should convert over to this */
   return lpCache->bNsIsLocal ? lpCache->lpLocalAddrHdr
-- 
1.9.1

