From aae90ecd381a0e242d30249cb8ea39a31949b127 Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Tue, 16 Aug 2016 16:18:43 +1000
Subject: [PATCH] d3d11: Support D3D11_FEATURE_D3D10_X_HARDWARE_OPTIONS in
 ID3D11Device CheckFeatureSupport

Signed-off-by: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
---
 dlls/d3d11/device.c | 12 ++++++++++++
 include/d3d11.idl   |  5 +++++
 2 files changed, 17 insertions(+)

diff --git a/dlls/d3d11/device.c b/dlls/d3d11/device.c
index df5a4ac..6142ac0 100644
--- a/dlls/d3d11/device.c
+++ b/dlls/d3d11/device.c
@@ -3463,6 +3463,18 @@ static HRESULT STDMETHODCALLTYPE d3d11_device_CheckFeatureSupport(ID3D11Device *
             threading_data->DriverCommandLists = FALSE;
             return S_OK;
         }
+        case D3D11_FEATURE_D3D10_X_HARDWARE_OPTIONS:
+        {
+            D3D11_FEATURE_DATA_D3D10_X_HARDWARE_OPTIONS *options = feature_support_data;
+            if (feature_support_data_size != sizeof(*options))
+            {
+                WARN("Invalid data size.\n");
+                return E_INVALIDARG;
+            }
+
+            options->ComputeShaders_Plus_RawAndStructuredBuffers_Via_Shader_4_x = FALSE;
+            return S_OK;
+        }
 
         default:
             FIXME("Unhandled feature %#x.\n", feature);
diff --git a/include/d3d11.idl b/include/d3d11.idl
index cd177c2..767321b 100644
--- a/include/d3d11.idl
+++ b/include/d3d11.idl
@@ -445,6 +445,11 @@ typedef struct D3D11_FEATURE_DATA_THREADING
     BOOL DriverCommandLists;
 } D3D11_FEATURE_DATA_THREADING;
 
+typedef struct D3D11_FEATURE_DATA_D3D10_X_HARDWARE_OPTIONS
+{
+    BOOL ComputeShaders_Plus_RawAndStructuredBuffers_Via_Shader_4_x;
+} D3D11_FEATURE_DATA_D3D10_X_HARDWARE_OPTIONS;
+
 typedef struct D3D11_FEATURE_DATA_D3D11_OPTIONS
 {
     BOOL OutputMergerLogicOp;
-- 
2.8.1

