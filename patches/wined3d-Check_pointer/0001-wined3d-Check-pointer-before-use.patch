From 7968df81fad758b696f608ee2e8bc4ddf7cba0db Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Fri, 7 Apr 2017 20:06:11 +1000
Subject: [PATCH] wined3d: Check pointer before use

Need for Speed - The Run

Signed-off-by: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
---
 dlls/wined3d/context.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/dlls/wined3d/context.c b/dlls/wined3d/context.c
index 7c090d432a..55b4917037 100644
--- a/dlls/wined3d/context.c
+++ b/dlls/wined3d/context.c
@@ -3892,7 +3892,7 @@ struct wined3d_context *context_reacquire(const struct wined3d_device *device,
 {
     struct wined3d_context *current_context;
 
-    if (context->tid != GetCurrentThreadId())
+    if (context || context->tid != GetCurrentThreadId())
         return NULL;
 
     current_context = context_acquire(device, context->current_rt.texture,
-- 
2.11.0

