From cce0b1b053bf2a95e5137d9428da556f52408019 Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Mon, 10 Jul 2017 14:20:57 +1000
Subject: [PATCH 1/2] widl: Only generate Proxy Stubs when functions have
 the call_as attribute

Fixes: https://bugs.winehq.org/show_bug.cgi?id=43302

Signed-off-by: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
---
 tools/widl/header.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/tools/widl/header.c b/tools/widl/header.c
index 7b97158..e48b488 100644
--- a/tools/widl/header.c
+++ b/tools/widl/header.c
@@ -1172,7 +1172,7 @@ static void write_method_proto(FILE *header, const type_t *iface)
   {
     const var_t *func = stmt->u.var;
 
-    if (!is_local(func->attrs)) {
+    if (is_callas(func->attrs)) {
       const char *callconv = get_attrp(func->type->attrs, ATTR_CALLCONV);
       if (!callconv) callconv = "STDMETHODCALLTYPE";
       /* proxy prototype */
-- 
1.9.1

