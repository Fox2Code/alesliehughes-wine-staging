From a30f0cccde86d80463d4330e773a8b401cd239ec Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Wed, 10 May 2017 09:57:58 +0000
Subject: [PATCH 1/3] include: Added drmexternals.idl and wmdrmsdk.idl

Signed-off-by: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
---
 include/Makefile.in      |  2 ++
 include/drmexternals.idl | 19 ++++++++++++
 include/wmdrmsdk.idl     | 80 ++++++++++++++++++++++++++++++++++++++++++++++++
 include/wmsdkidl.idl     |  2 +-
 4 files changed, 102 insertions(+), 1 deletion(-)
 create mode 100644 include/drmexternals.idl
 create mode 100644 include/wmdrmsdk.idl

diff --git a/include/Makefile.in b/include/Makefile.in
index 497c76f..cf1c7c4 100644
--- a/include/Makefile.in
+++ b/include/Makefile.in
@@ -58,6 +58,7 @@ IDL_SRCS = \
 	docobj.idl \
 	docobjectservice.idl \
 	downloadmgr.idl \
+	drmexternals.idl \
 	dwrite.idl \
 	dwrite_1.idl \
 	dwrite_2.idl \
@@ -179,6 +180,7 @@ IDL_SRCS = \
 	winsxs.idl \
 	wmiutils.idl \
 	wmp.idl \
+	wmdrmsdk.idl \
 	wmsbuffer.idl \
 	wmsdkidl.idl \
 	wpcapi.idl \
diff --git a/include/drmexternals.idl b/include/drmexternals.idl
new file mode 100644
index 0000000..88826ad
--- /dev/null
+++ b/include/drmexternals.idl
@@ -0,0 +1,19 @@
+/*
+ * Copyright 2017 Alistair Leslie-Hughes
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
+ */
+
+import "wmdrmsdk.idl";
diff --git a/include/wmdrmsdk.idl b/include/wmdrmsdk.idl
new file mode 100644
index 0000000..a8b7fda
--- /dev/null
+++ b/include/wmdrmsdk.idl
@@ -0,0 +1,80 @@
+/*
+ * Copyright 2017 Alistair Leslie-Hughes
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
+ */
+import "oaidl.idl";
+import "ocidl.idl";
+import "mfobjects.idl";
+import "mfidl.idl";
+
+typedef struct _DRM_MINIMUM_OUTPUT_PROTECTION_LEVELS
+{
+    WORD wCompressedDigitalVideo;
+    WORD wUncompressedDigitalVideo;
+    WORD wAnalogVideo;
+    WORD wCompressedDigitalAudio;
+    WORD wUncompressedDigitalAudio;
+} DRM_MINIMUM_OUTPUT_PROTECTION_LEVELS;
+
+typedef struct _DRM_VIDEO_OUTPUT_PROTECTION
+{
+    GUID guidId;
+    BYTE bConfigData;
+} DRM_VIDEO_OUTPUT_PROTECTION;
+
+typedef struct _DRM_VIDEO_OUTPUT_PROTECTION_IDS
+{
+    WORD                        cEntries;
+    DRM_VIDEO_OUTPUT_PROTECTION *rgVop;
+} DRM_VIDEO_OUTPUT_PROTECTION_IDS;
+
+typedef struct _DRM_OPL_OUTPUT_IDS
+{
+    WORD cIds;
+    GUID *rgIds;
+} DRM_OPL_OUTPUT_IDS;
+
+typedef struct __tagDRM_COPY_OPL
+{
+    WORD               wMinimumCopyLevel;
+    DRM_OPL_OUTPUT_IDS oplIdIncludes;
+    DRM_OPL_OUTPUT_IDS oplIdExcludes;
+} DRM_COPY_OPL;
+
+typedef struct __tagDRM_PLAY_OPL
+{
+    DRM_MINIMUM_OUTPUT_PROTECTION_LEVELS minOPL;
+    DRM_OPL_OUTPUT_IDS                   oplIdReserved;
+    DRM_VIDEO_OUTPUT_PROTECTION_IDS      vopi;
+} DRM_PLAY_OPL;
+
+
+[
+    uuid(82435be0-f7c1-4df9-8103-eeabebf3d6e1),
+    version(1.0)
+]
+library WMDRMContentEnablerLib
+{
+    importlib("stdole2.tlb");
+
+    [
+        uuid(82435bdf-f7c1-4df9-8103-eeabebf3d6e1)
+    ]
+    coclass WMDRMContentEnablerActivate
+    {
+        [default] interface IPersistStream;
+    };
+};
diff --git a/include/wmsdkidl.idl b/include/wmsdkidl.idl
index 5ce849f..433ec46 100644
--- a/include/wmsdkidl.idl
+++ b/include/wmsdkidl.idl
@@ -18,7 +18,7 @@
 
 import "oaidl.idl";
 import "wmsbuffer.idl";
-/* import "drmexternals.idl"; */
+import "drmexternals.idl";
 
 typedef unsigned __int64 QWORD;
 
-- 
1.9.1

