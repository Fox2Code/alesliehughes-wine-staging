From 3bbc644497219981878b74888fcb469eae0ed950 Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Fri, 21 Dec 2018 10:39:59 +1100
Subject: [PATCH] mfreadwrite: Add MFCreateSinkWriterFromURL stub

---
 dlls/mfreadwrite/main.c           | 7 +++++++
 dlls/mfreadwrite/mfreadwrite.spec | 2 +-
 include/mfreadwrite.idl           | 2 ++
 3 files changed, 10 insertions(+), 1 deletion(-)

diff --git a/dlls/mfreadwrite/main.c b/dlls/mfreadwrite/main.c
index 0c7fb52..b589cd5 100644
--- a/dlls/mfreadwrite/main.c
+++ b/dlls/mfreadwrite/main.c
@@ -247,3 +247,10 @@ HRESULT WINAPI MFCreateSourceReaderFromMediaSource(IMFMediaSource *source, IMFAt
     *reader = &object->IMFSourceReader_iface;
     return hr;
 }
+
+HRESULT WINAPI MFCreateSinkWriterFromURL(LPCWSTR url, IMFByteStream *bytestream, IMFAttributes *attributes, IMFSinkWriter **writer)
+{
+    FIXME("%s, %p, %p, %p\n", debugstr_w(url), bytestream, attributes, writer);
+
+    return E_NOTIMPL;
+}
diff --git a/dlls/mfreadwrite/mfreadwrite.spec b/dlls/mfreadwrite/mfreadwrite.spec
index 4272b71..2d2cc99 100644
--- a/dlls/mfreadwrite/mfreadwrite.spec
+++ b/dlls/mfreadwrite/mfreadwrite.spec
@@ -1,7 +1,7 @@
 @ stub DllCanUnloadNow
 @ stub DllGetClassObject
 @ stub MFCreateSinkWriterFromMediaSink
-@ stub MFCreateSinkWriterFromURL
+@ stdcall MFCreateSinkWriterFromURL(wstr ptr ptr ptr)
 @ stdcall MFCreateSourceReaderFromByteStream(ptr ptr ptr)
 @ stdcall MFCreateSourceReaderFromMediaSource(ptr ptr ptr)
 @ stub MFCreateSourceReaderFromURL
diff --git a/include/mfreadwrite.idl b/include/mfreadwrite.idl
index 8547b80..fb285d4 100644
--- a/include/mfreadwrite.idl
+++ b/include/mfreadwrite.idl
@@ -145,6 +145,8 @@ interface IMFReadWriteClassFactory : IUnknown
                                      [in] REFIID riid, [out, iid_is(riid)] void **object );
 }
 
+cpp_quote( "HRESULT WINAPI MFCreateSinkWriterFromURL(LPCWSTR url, IMFByteStream *bytestream, IMFAttributes *attributes," )
+cpp_quote( "                                         IMFSinkWriter **writer);" )
 cpp_quote( "HRESULT WINAPI MFCreateSourceReaderFromByteStream(IMFByteStream *stream, IMFAttributes *attributes," )
 cpp_quote( "                                                  IMFSourceReader **reader);" )
 cpp_quote( "HRESULT WINAPI MFCreateSourceReaderFromMediaSource(IMFMediaSource *source, IMFAttributes *attributes," )
-- 
1.9.1

